#!/bin/zsh

SCRIPT=${0##*/} 
POSTFIX_UPPERCASE=""

_update-vars () {
	POSTFIX="${SCRIPT//update-vars/}"
	if [[ -n "${POSTFIX}" ]]
	then
		POSTFIX_UPPERCASE="$(uppercase ${POSTFIX//-/_})"
		CURR_SHELL_VARS=$(eval "echo \$SHELL_VARS${POSTFIX_UPPERCASE}")
	else
		CURR_SHELL_VARS="${SHELL_VARS}"
	fi

    echo -n "####\nâ€¢ CURR_SHELL_VARS -> $CURR_SHELL_VARS " >> "${TMPDIR}/debug-${}"
	
    [[ -r "${CURR_SHELL_VARS}" ]] || return 255
	
    terminal-update-needed "${CURR_SHELL_VARS}" && {
        eval "unset SHELL_VARS${POSTFIX_UPPERCASE}_SOURCED"
		source ${CURR_SHELL_VARS}
        terminal-update-checksum "${CURR_SHELL_VARS}"
        echo "sourced"  >> "${TMPDIR}/debug-${}"
	} || {
        echo "not sourced"  >> "${TMPDIR}/debug-${}"
    }
}

_update-vars
